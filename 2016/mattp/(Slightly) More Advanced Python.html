<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- common.css -->
  <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: Arial, Helvetica, sans-serif;margin: 0;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre {margin: 0;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
  <!-- ace-static.css -->
  <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
  <style>.ace-chrome .ace_gutter {background: #ebebeb;color: #333;overflow : hidden;}.ace-chrome .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-chrome {background-color: #FFFFFF;color: black;}.ace-chrome .ace_cursor {color: black;}.ace-chrome .ace_invisible {color: rgb(191, 191, 191);}.ace-chrome .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-chrome .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-chrome .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-chrome .ace_invalid {background-color: rgb(153, 0, 0);color: white;}.ace-chrome .ace_fold {}.ace-chrome .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-chrome .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-chrome .ace_support.ace_type,.ace-chrome .ace_support.ace_class.ace-chrome .ace_support.ace_other {color: rgb(109, 121, 222);}.ace-chrome .ace_variable.ace_parameter {font-style:italic;color:#FD971F;}.ace-chrome .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-chrome .ace_comment {color: #236e24;}.ace-chrome .ace_comment.ace_doc {color: #236e24;}.ace-chrome .ace_comment.ace_doc.ace_tag {color: #236e24;}.ace-chrome .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-chrome .ace_variable {color: rgb(49, 132, 149);}.ace-chrome .ace_xml-pe {color: rgb(104, 104, 91);}.ace-chrome .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-chrome .ace_heading {color: rgb(12, 7, 255);}.ace-chrome .ace_list {color:rgb(185, 6, 144);}.ace-chrome .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-chrome .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-chrome .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-chrome .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-chrome .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-chrome .ace_gutter-active-line {background-color : #dcdcdc;}.ace-chrome .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-chrome .ace_storage,.ace-chrome .ace_keyword,.ace-chrome .ace_meta.ace_tag {color: rgb(147, 15, 128);}.ace-chrome .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-chrome .ace_string {color: #1A1AA6;}.ace-chrome .ace_entity.ace_other.ace_attribute-name {color: #994409;}.ace-chrome .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}</style>
  <!-- export.css -->
  <style>
    body{margin:0 auto;max-width:800px;line-height:1.4}
    #nav{margin:5px 0 10px;font-size:15px}
    #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
    #contentarea{font-size:15px;margin:16px 0}
    .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
    .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
    .latex-cell{white-space:pre-wrap;}
  </style>
  <!-- User CSS -->
  <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
</head>
<body>
  <div id="titlearea">
    <h2>(Slightly) More Advanced Python</h2>
  </div>
  <div id="contentarea"><div class="cell markdown-cell"><h1 id="goal-of-this-talk">Goal of this talk</h1>
<ol>
<li>A lot of people use Python</li><li>Python isn't super fast</li><li>Python isn't super strict</li><li>There exist a few techniques to help make it a bit faster, easier, and more robust</li></ol>
</div><div class="cell text-cell"><img src="resources/50591EA65984D5B768FF58B12F9FD19F.jpg" alt="langs.jpg"></div><div class="cell markdown-cell"><h2 id="main-issues">Main Issues</h2>
<ol>
<li>Higher level languages tend to be slower, pointer resolution costs</li><li>Memory management:<ol>
<li>Who knows when the GC activates</li><li>Scaling workloads in Python isn't easy</li><li>A lot of memory taken up even for primitives</li></ol>
</li></ol>
<h1 id="iterators">Iterators</h1>
<p>Premise:</p>
<blockquote>
<p>Use a pointer to iterate over a sequence, even if the sequence isn't complete [ad-hoc]</p>
</blockquote>
</div><div class="cell markdown-cell"><h2 id="generators">Generators</h2>
<p>Don't generate a whole block of data at once, compute the values required as needed. Pipeline values, rather than using a blocking paradigm.</p>
<h3 id="example-range-and-xrange-">Example: <code>range</code> and <code>xrange</code></h3>
<p>Only applies to Python 2.x, as 3.x <code>range</code> has the generator functionality of 2.x's <code>xrange</code></p>
<p><code>range</code> creates the list of integers in memory, and stores them in memory before proceeding to the next execution block.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1000000</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<p>1,000,000 integers are generated and stored in memory for i to iterate over before line 2 is entered. How much memory is used?</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">from</span>&nbsp;<span class="ace_identifier">sys</span>&nbsp;<span class="ace_keyword">import</span>&nbsp;<span class="ace_identifier">getsizeof</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">y</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">1000000</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">getsizeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">getsizeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">y</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>24<br>24</p>
</blockquote>
<p>Each of these integers are 24 bytes / 192 bits. So 24MB of memory taken already to store this elements of this list, plus the boilerplate of <code>list</code> (872 bytes), right?</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">l</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1000000</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">getsizeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">l</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>8000072</p>
</blockquote>
<p>Not quite. Python has been optimised to internall use lists of smaller-sized ints where applicable etc. for instances such as this, ends up around 8MB.</p>
<p>Nonetheless, we can do better. Let's use a generator.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">r</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1000000</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">getsizeof</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">r</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>40</p>
</blockquote>
<p>Much better - 40B, application logic doesn't need to be altered, the value of <code>i</code> will increment through the range as expected, but will be simply generated as required.</p>
<p>Tradeoff: memory versus computation</p>
<h3 id="writing-a-generator">Writing a Generator</h3>
<p>This concept of not generating blocks of objects in an application pipeline is a good one, consider the following:</p>
<p>If the values in the lists are independent, we would like to process them as they become available. We're used to using <code>return</code> to pass data from within functions to elsewhere in our programs, but now we can start to use <code>yield</code></p>
<p>There can be multiple <code>yield</code> statements in a code-block.</p>
<h4 id="example-super-simple-generator">Example: Super Simple Generator</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">range_generator</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">min</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">0</span>,&nbsp;<span class="ace_support ace_function">max</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">0</span>;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">while</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword ace_operator">&lt;=</span>&nbsp;<span class="ace_support ace_function">max</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">yield</span>&nbsp;<span class="ace_identifier">i</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword ace_operator">+=</span>&nbsp;<span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">g</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">range_generator</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">0</span>,&nbsp;<span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">g</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<p>This shows the memory location of the generator: <code>&lt;generator object range_generator at 0x1023a4780&gt;</code>, to obtain the data, we need to iterate over it.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">val</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">g</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">val</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>0<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10</p>
</blockquote>
<h4 id="example-cast-generator-to-list">Example: Cast Generator to List</h4>
<p>Maybe you want your <code>xrange</code> or whatever to actually be in a list, in which case you'll have to go over every value it generates. This is done simply using a list-comprehension:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">concrete_g</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">range_generator</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">0</span>,&nbsp;<span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">)]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">concrete_g</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</p>
</blockquote>
<p><em>Important</em>: once a generator has reached the end of its sequence, it <strong>does not</strong> loop back, it's exhausted. We iterated <code>for val in g</code> above, so if the previous example is modified to:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">concrete_g</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">g</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">concrete_g</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>[]</p>
</blockquote>
<h3 id="iterating-over-dictionaries">Iterating over Dictionaries</h3>
<p>It's clear that <code>for element in my_list</code> is better than having some counter <code>i</code>:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">len</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">my_list</span><span class="ace_paren ace_rparen">))</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">val</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">my_list</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;...
</div></div></div>
</code></pre>
<p>For dictionaries, it may not be quite so obvious. Suppose I have a dictionary, <code>my_dict</code>, the first attempt may look like:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">key</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">my_dict</span>.<span class="ace_identifier">keys</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">val</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">my_dict</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<p>This kinda sucks (in Python 2.x anyway), as <code>my_dict.keys()</code> is going to generate a blocking-copy of the dict's keys before proceeding. We want to use a generator, iterator. The <code>dict</code> class offers three:</p>
<ol>
<li><code>iterkeys()</code> -- a generator over the keys</li><li><code>itervalues()</code> -- a generator over the values</li><li><code>iteritems()</code> -- a generator over both</li></ol>
<p>Using the third is the most common, and the quickest. Suppose the value of a given key <code>k</code> is an iterable container like a list, the <code>iteritems()</code> generator will return the pairs <code>k, v</code> for every <code>v</code> in <code>my_dict[k]</code>. It looks like this:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">k</span>,&nbsp;<span class="ace_identifier">v</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">my_dict</span>.<span class="ace_identifier">iteritems</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Every&nbsp;key,&nbsp;value&nbsp;combination</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'{}:&nbsp;{}'</span>.<span class="ace_support ace_function">format</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">k</span>,&nbsp;<span class="ace_identifier">v</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
</div><div class="cell markdown-cell"><h1 id="functions-objects">Functions &amp; Objects</h1>
<p>This relies on knowing what an object is. If you don't know/remember, refer to Clara and Theo's talks on object orientation and design patterns.</p>
<h2 id="operator-overloading">Operator Overloading</h2>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_identifier">MyClass</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">object</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__init__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Our&nbsp;faithful&nbsp;constructor</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<p>Assume that all functions that follow also belong to <code>MyClass</code>, and that we have instantiated two instances of the class:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">MyClass</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc2</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">MyClass</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h3 id="common-examples">Common Examples</h3>
<p>This covers a few examples, though you might want to check out the <a href="https://docs.python.org/2/reference/datamodel.html">documentation</a> for all overloading possibilities.</p>
<h4 id="printed-representation-__str__-">Printed representation <code>__str__</code></h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__str__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"MyClass&nbsp;with&nbsp;name&nbsp;{}&nbsp;and&nbsp;value&nbsp;{}"</span>.<span class="ace_support ace_function">format</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">_name</span>,&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_value</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<p>Then, if we either cast the value to String into a variable, or print it (suppose <code>mc1._name = 'X'</code>, <code>mc1._value = 'Y'</code>):</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">mc1</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>MyClass with name X and value Y</p>
</blockquote>
<h4 id="comparison-__cmp__-">Comparison <code>__cmp__</code></h4>
<p><em>Note:</em> <code>cmp(x, y)</code> follows the standard pattern in many languages / platforms:</p>
<p><span class="MathJax_Preview"></span></p><div class="MathJax_Display" role="textbox" aria-readonly="true" style="text-align: center;"><span class="MathJax" id="MathJax-Element-2-Frame" style=""><nobr><span class="math" id="MathJax-Span-1" style="width: 13.266em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.042em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(2.183em, 1000em, 5.963em, -0.469em); top: -4.323em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mtext" id="MathJax-Span-3" style="font-family: STIXGeneral-Regular;">cmp</span><span class="mo" id="MathJax-Span-4" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-5" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-6" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-7" style="font-family: STIXGeneral-Italic; padding-left: 0.188em;">y</span><span class="mo" id="MathJax-Span-8" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-9" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mrow" id="MathJax-Span-10" style="padding-left: 0.313em;"><span class="mo" id="MathJax-Span-11" style="vertical-align: 1.984em; padding-left: 0.313em;"><span style="display: inline-block; position: relative; width: 0.64em; height: 0px;"><span style="position: absolute; font-family: STIXSizeOneSym; top: -3.31em; left: 0em;">⎧<span style="display: inline-block; width: 0px; height: 4.01em;"></span></span><span style="position: absolute; font-family: STIXSizeOneSym; top: -0.842em; left: 0em;">⎩<span style="display: inline-block; width: 0px; height: 4.01em;"></span></span><span style="position: absolute; font-family: STIXSizeOneSym; top: -2.076em; left: 0em;">⎨<span style="display: inline-block; width: 0px; height: 4.01em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -2.693em; left: 0em;">⎪<span style="display: inline-block; width: 0px; height: 4.01em;"></span></span><span style="font-family: STIXSizeOneSym; position: absolute; top: -1.459em; left: 0em;">⎪<span style="display: inline-block; width: 0px; height: 4.01em;"></span></span></span></span><span class="mtable" id="MathJax-Span-12" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 4.771em; height: 0px;"><span style="position: absolute; clip: rect(2.345em, 1000em, 5.859em, -0.496em); top: -4.219em; left: 0em;"><span style="display: inline-block; position: relative; width: 2.448em; height: 0px;"><span style="position: absolute; clip: rect(1.81em, 1000em, 2.862em, -0.496em); top: -3.684em; left: 0em;"><span class="mtd" id="MathJax-Span-13"><span class="mrow" id="MathJax-Span-14"><span class="mi" id="MathJax-Span-15" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-16" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&lt;</span><span class="mi" id="MathJax-Span-17" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">y</span><span class="mo" id="MathJax-Span-18" style="font-family: STIXGeneral-Regular;">,</span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span><span style="position: absolute; clip: rect(1.903em, 1000em, 2.862em, -0.496em); top: -2.453em; left: 0em;"><span class="mtd" id="MathJax-Span-23"><span class="mrow" id="MathJax-Span-24"><span class="mi" id="MathJax-Span-25" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-26" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">=</span><span class="mi" id="MathJax-Span-27" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">y</span><span class="mo" id="MathJax-Span-28" style="font-family: STIXGeneral-Regular;">,</span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span><span style="position: absolute; clip: rect(1.81em, 1000em, 2.862em, -0.496em); top: -1.222em; left: 0em;"><span class="mtd" id="MathJax-Span-32"><span class="mrow" id="MathJax-Span-33"><span class="mi" id="MathJax-Span-34" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-35" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&gt;</span><span class="mi" id="MathJax-Span-36" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">y</span><span class="mo" id="MathJax-Span-37" style="font-family: STIXGeneral-Regular;">,</span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.219em;"></span></span><span style="position: absolute; clip: rect(2.098em, 1000em, 5.549em, -0.445em); top: -4.115em; left: 3.573em;"><span style="display: inline-block; position: relative; width: 1.198em; height: 0px;"><span style="position: absolute; clip: rect(1.668em, 1000em, 2.656em, -0.405em); top: -3.684em; left: 0em;"><span class="mtd" id="MathJax-Span-19"><span class="mrow" id="MathJax-Span-20"><span class="mo" id="MathJax-Span-21" style="font-family: STIXGeneral-Regular;">−</span><span class="mn" id="MathJax-Span-22" style="font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span><span style="position: absolute; clip: rect(1.668em, 1000em, 2.67em, -0.445em); top: -2.453em; left: 0em;"><span class="mtd" id="MathJax-Span-29"><span class="mrow" id="MathJax-Span-30"><span class="mn" id="MathJax-Span-31" style="font-family: STIXGeneral-Regular;">0</span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span><span style="position: absolute; clip: rect(1.668em, 1000em, 2.656em, -0.358em); top: -1.222em; left: 0em;"><span class="mtd" id="MathJax-Span-38"><span class="mrow" id="MathJax-Span-39"><span class="mn" id="MathJax-Span-40" style="font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.115em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.323em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 4.287em; vertical-align: -1.843em;"></span></span></nobr></span></div><script type="math/tex; mode=display" id="MathJax-Element-2">
\mbox{cmp}(x, y) =
\begin{cases}
    x < y,  & -1 \\
    x = y, & 0 \\
    x > y, & 1
\end{cases}
</script><p></p>
<p>If you wanted to implement this for some numeric value within your object:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__cmp__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_support ace_function">cmp</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">_val</span>,&nbsp;<span class="ace_identifier">other</span>.<span class="ace_identifier">_val</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<p>Or do whatever you want, it's your program...</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__cmp__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">other</span>.<span class="ace_identifier">_name</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">'bananas'</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">"YOU&nbsp;SHOULD&nbsp;NEVER&nbsp;COMPARE&nbsp;ME&nbsp;TO&nbsp;BANANAS!"</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">import</span>&nbsp;<span class="ace_identifier">sys</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_identifier">sys</span>.<span class="ace_identifier">exit</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_support ace_function">cmp</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">_val</span>,&nbsp;<span class="ace_identifier">other</span>.<span class="ace_identifier">_val</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">cmp</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">mc1</span>,&nbsp;<span class="ace_identifier">mc2</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h3 id="equalities">Equalities</h3>
<p>These should all return <code>boolean</code> types.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__lt__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Less&nbsp;than&nbsp;other</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__le__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Less&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;other</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__eq__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Equal&nbsp;to&nbsp;other</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__ne__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Not&nbsp;equal&nbsp;to&nbsp;other</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__gt__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Greater&nbsp;than&nbsp;other</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__ge__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">other</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Greater&nbsp;than&nbsp;or&nbsp;equal&nbsp;to&nbsp;other</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<p>These would be used when using the equality operators:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_identifier">mc2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">&lt;=</span>&nbsp;<span class="ace_identifier">mc2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">==</span>&nbsp;<span class="ace_identifier">mc2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">!=</span>&nbsp;<span class="ace_identifier">mc2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">&gt;</span>&nbsp;<span class="ace_identifier">mc2</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span>&nbsp;<span class="ace_keyword ace_operator">&gt;=</span>&nbsp;<span class="ace_identifier">mc2</span>
</div></div></div>
</code></pre>
<h3 id="list-dictionary-style-accessors">List/Dictionary-Style Accessors</h3>
<p>We're used to using the <code>var[key]</code> style for getting values out of dictionaries and lists, we can implement this access pattern on our own objects with the following methods:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__getattr__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">key</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__setattr__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">key</span>,&nbsp;<span class="ace_identifier">value</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">mc1</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">'value'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">mc1</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">])</span>
</div></div></div>
</code></pre>
<blockquote>
<p>value</p>
</blockquote>
<h3 id="example-neverendingdictionary">Example: NeverEndingDictionary</h3>
<p>Imagine I want a dictionary that transparently spills to disk if it's getting too big in memory.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_identifier">NeverEndingDictionary</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__init__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_repr</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Store&nbsp;interim&nbsp;results</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_cache_full</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_language">False</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;...
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__getattr__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">key</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">key</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_repr</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_repr</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;If&nbsp;it&nbsp;was&nbsp;in&nbsp;the&nbsp;cache,&nbsp;return&nbsp;that,&nbsp;otherwise</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;use&nbsp;a&nbsp;different&nbsp;method&nbsp;of&nbsp;this&nbsp;object&nbsp;to&nbsp;load</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;(and&nbsp;return)&nbsp;the&nbsp;associated&nbsp;value&nbsp;from&nbsp;disk</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_load_from_disk</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__setattr__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">key</span>,&nbsp;<span class="ace_identifier">value</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_cache_full</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_identifier">target</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_find_lru_key</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_spill_to_disk</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">target</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Now&nbsp;1&nbsp;free</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_repr</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">value</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">_determine_if_full</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Some&nbsp;heuristic</span>
</div></div></div>
</code></pre>
<p>Lots of fun back-end stuff that whoever uses <code>NeverEndingDictionary</code> never has to worry about:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ned</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">NeverEndingDictionary</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ned</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">'value'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">ned</span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">key</span><span class="ace_paren ace_rparen">])</span>
</div></div></div>
</code></pre>
<blockquote>
<p>'value'</p>
</blockquote>
<p><em>Note</em>: There are a lot of operators you can define:</p>
</div><div class="cell text-cell"><img src="resources/7AFC9A791BA429F9179E327841D91292.png" alt="Screen Shot 2016-02-08 at 11.24.21.png"></div><div class="cell markdown-cell"><h2 id="objects-as-functions">Objects as Functions</h2>
<p>Maybe we'd like to use our objects in the same way we use functions. </p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__call__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_keyword ace_operator">*</span><span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<p>Motivating example: recall Theo's slides on design patterns, rather than using <code>optimise_function</code>, why not just call the object itself as if it were a function?</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_identifier">Optimisation_Algorithm</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">object</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__init__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">cost_f</span>,&nbsp;<span class="ace_identifier">max_it</span>,&nbsp;<span class="ace_identifier">w_init</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_language">None</span>,&nbsp;<span class="ace_identifier">step_size</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">0.01</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">cost_f</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">cost_f</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">max_it</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">max_it</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">d</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">cost_f</span>.<span class="ace_identifier">dimension</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">num</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">cost_f</span>.<span class="ace_identifier">num</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">l</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">cost_f</span>.<span class="ace_identifier">l</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">w_init</span>&nbsp;<span class="ace_keyword">is</span>&nbsp;<span class="ace_constant ace_language">None</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">w</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">rng</span>.<span class="ace_identifier">randn</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">d</span>,&nbsp;<span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">else</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">w</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">w_init</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">step_size</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">step_size</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">do_iteration</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__call__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">counter</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">0</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">cost_list</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">self</span>.<span class="ace_identifier">cost_f</span>.<span class="ace_identifier">loss</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">w</span><span class="ace_paren ace_rparen">)]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">while</span>&nbsp;<span class="ace_identifier">counter</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">max_it</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">do_iteration</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">cost_list</span>.<span class="ace_identifier">append</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">cost_f</span>.<span class="ace_identifier">loss</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>.<span class="ace_identifier">w</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">counter</span>&nbsp;<span class="ace_keyword ace_operator">+=</span>&nbsp;<span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_identifier">self</span>.<span class="ace_identifier">w</span>,&nbsp;<span class="ace_identifier">cost_list</span>
</div></div></div>
</code></pre>
<p>Then, instead of:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">func_sgd</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">SGD</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">**</span><span class="ace_identifier">params</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">func_sgd</span>.<span class="ace_identifier">optimise_function</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<p>You can simply use it as if it were a function:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">func_sgd</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">SGD</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">**</span><span class="ace_identifier">params</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">func_sgd</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h2 id="pointer-resolution-slow-">Pointer Resolution (Slow)</h2>
<p>A pointer is a variable (an integer, typically 64-bit on modern computers) that stores a memory location. Storing and moving around a 64-bit integer is a lot easier (typically) than the objects they point to. </p>
</div><div class="cell text-cell"><img src="resources/3929764EA3973FF355C989D2D209F646.jpg"></div><div class="cell markdown-cell"><p>This is good, but you have to pay the cost of two memory traversals to resolve the object you're looking for.</p>
<p>Think about the object hierarchy, <code>Object-&gt;variable-&gt;function</code>, in Python -- everything is a pointer. They're called <code>names</code>, no <code>name</code> is bound directly to a value (Python doesn't let you touch memory management, this is all done in the interpreter) -- so this cost is always paid.</p>
<h3 id="example">Example</h3>
<p>Nested loops blow up <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-41" style="width: 1.703em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.406em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.668em, 1000em, 2.833em, -0.409em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-42"><span class="mi" id="MathJax-Span-43" style="font-family: STIXGeneral-Italic;">O</span><span class="mo" id="MathJax-Span-44" style="font-family: STIXGeneral-Regular;">(</span><span class="mo" id="MathJax-Span-45" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.149em; vertical-align: -0.275em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">O()</script> complexity. In this case, for <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-4-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-46" style="width: 1.203em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.99em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.138em, 1000em, 2.301em, -0.455em); top: -2.135em; left: 0em;"><span class="mrow" id="MathJax-Span-47"><span class="msubsup" id="MathJax-Span-48"><span style="display: inline-block; position: relative; width: 0.96em; height: 0px;"><span style="position: absolute; clip: rect(1.903em, 1000em, 2.665em, -0.455em); top: -2.5em; left: 0em;"><span class="mi" id="MathJax-Span-49" style="font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span><span style="position: absolute; top: -2.55em; left: 0.521em;"><span class="mn" id="MathJax-Span-50" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 2.188em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.135em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.145em; vertical-align: -0.073em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">n^2</script> operations, you are also paying the cost of 3 pointer look ups -- <code>results</code>, then <code>raw_results</code>, and finally <code>append</code>.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">ResultsCollator</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">n_samples</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">j</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">n_iters</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">raw_results</span>.<span class="ace_identifier">append</span><span class="ace_paren ace_lparen">(</span>...<span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h3 id="fix">Fix</h3>
<p>If <code>append</code> is just this pointer, and is constant, why not keep a reference to it and call that? What's callable and not in Python isn't explitly clear from its type, though you can test this with <code>iscallable(x)</code>.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">ResultsCollator</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">f_append</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">raw_results</span>.<span class="ace_identifier">append</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">n_samples</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">j</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">n_iters</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">f_append</span><span class="ace_paren ace_lparen">(</span>...<span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
</div><div class="cell markdown-cell"><h2 id="variadic-functions">Variadic Functions</h2>
<p>Suppose I want a function, but I don't really know how many arguments/parameters I want to pass through to it. Variadic functions give me this freedom by using <code>*args</code> for a list of arguments, and <code>**kwargs</code> for a <code>key: value</code> mapping of arguments.</p>
<h3 id="-args">*args</h3>
<p><em>Note</em>: <code>locals()</code> returns a dictionary of the variables in the current scope, whose keys are the variables' names (like <code>who</code> in MATLAB) and their associated values. The scope / frame determines the dictionary returned.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>{}</p>
</blockquote>
<p>This returned an empty dictionary, as expected. If we try passing some arguments to this function: <code>test_locals(1, 3)</code>:</p>
<blockquote>
<p>TypeError: test_locals() takes no arguments (2 given)</p>
</blockquote>
<p>This makes sense, but I want to go all variadiac. Let's change the function.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>{'args': ()}</p>
</blockquote>
<p>The dictionary now has the key <code>args</code> that maps to an empty set. Running <code>test_locals(5, 2, 6, 7, 151, 35, 13, 84)</code> gives:</p>
<blockquote>
<p>{'args': (5, 2, 6, 7, 151, 35, 13, 84)}</p>
</blockquote>
<p>Why would this be useful? Think about a summation:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">my_sum</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_support ace_function">reduce</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">x</span>,&nbsp;<span class="ace_identifier">y</span>:&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">y</span>,&nbsp;<span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">my_sum</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">5</span>,&nbsp;<span class="ace_constant ace_numeric">2</span>,&nbsp;<span class="ace_constant ace_numeric">6</span>,&nbsp;<span class="ace_constant ace_numeric">7</span>,&nbsp;<span class="ace_constant ace_numeric">151</span>,&nbsp;<span class="ace_constant ace_numeric">35</span>,&nbsp;<span class="ace_constant ace_numeric">13</span>,&nbsp;<span class="ace_constant ace_numeric">84</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>303</p>
</blockquote>
<h3 id="-kwargs">**kwargs</h3>
<p>If <code>*args</code> gave us a list from <code>locals()</code>, then <code>**kwargs</code> should give us a dictionary.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">**</span><span class="ace_identifier">kwargs</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>{'kwargs': {}}</p>
</blockquote>
<p>This is usual for _named arguments, e.g. <code>test_locals(name='bob', age=20, likes=['doughnuts', 'rugby'])</code></p>
<blockquote>
<p>{'foo': {'age': 20, 'name': 'bob', 'likes': ['doughnuts', 'rugby']}}</p>
</blockquote>
<h3 id="combining-args-args-and-kwargs-">Combining args, <code>*args</code>, and <code>**kwargs</code></h3>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">formal_argument</span><span class="ace_keyword ace_operator">=</span><span class="ace_string">'default'</span>,&nbsp;<span class="ace_keyword ace_operator">*</span><span class="ace_identifier">args</span>,&nbsp;<span class="ace_keyword ace_operator">**</span><span class="ace_identifier">kwargs</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">test_locals</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>{'args': (), 'formal_argument': 'default', 'kwargs': {}}</p>
</blockquote>
<p>Both present, empty as expected. Trying to define for all three, <code>test_locals('not default', 2, None, True, [], test='dog', lang='en')</code>:</p>
<blockquote>
<p>{'args': (2, None, True, []), 'formal_argument': 'not default', 'kwargs': {'test': 'dog', 'lang': 'en'}}</p>
</blockquote>
<p><em>Final point</em>: <code>args</code> and <code>kwargs</code> are convention, these strings can be anything (the name of the variable in local scope will change accordingly. What's important is that one star suffix <code>*</code> will return a <code>set</code>, whereas <code>**</code> will return a <code>dict</code>.</p>
<h3 id="unwrapping-values">Unwrapping values</h3>
<p>Think again to Theo's <code>Optimization_Algorithm</code> class, and its constructor params:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__init__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_identifier">cost_f</span>,&nbsp;<span class="ace_identifier">max_it</span>,&nbsp;<span class="ace_identifier">w_init</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_language">None</span>,&nbsp;<span class="ace_identifier">step_size</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">0.01</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<p>We know the names of these values, why not build up a dict of them and unwrap it into the object's construction?</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">params</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">{</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_string">'cost_f'</span>:&nbsp;<span class="ace_identifier">func_ptr</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_string">'max_it'</span>:&nbsp;<span class="ace_constant ace_numeric">100</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_string">'w_init'</span>:&nbsp;<span class="ace_constant ace_numeric">0.1</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_string">'step_size'</span>:&nbsp;<span class="ace_constant ace_numeric">0.05</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">SGD</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">SGD</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">**</span><span class="ace_identifier">params</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<p>Really useful when working with big systems and building up the parameters of a model in the same place, rather than having a bunch of intermediary variables.</p>
</div><div class="cell markdown-cell"><h2 id="-placeholder-functions"><span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-5-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-51" style="width: 0.578em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.469em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.666em, 1000em, 2.672em, -0.481em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-52"><span class="mi" id="MathJax-Span-53" style="font-family: STIXGeneral-Italic;">λ</span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.958em; vertical-align: -0.082em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">\lambda</script> Functions</h2>
<p><code>lambda</code> is simply an <a href="https://en.wikipedia.org/wiki/Anonymous_function">anonymous function</a> -- but this can be bound to a name</p>
<p>The return type is simply the result of the contained expression.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">f_convert</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">x</span>:&nbsp;<span class="ace_constant ace_language">True</span>&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">&gt;</span>&nbsp;<span class="ace_constant ace_numeric">15</span>&nbsp;<span class="ace_keyword">else</span>&nbsp;<span class="ace_constant ace_language">False</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f_convert</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f_convert</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">15</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">f_convert</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">20</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>False<br>False<br>True</p>
</blockquote>
<h3 id="example-sorting-predicate">Example: Sorting predicate</h3>
<p>You have a <code>list</code> of values bound to <code>X</code>, you know that the type <code>list</code> has a member-function <code>sort</code> that either sorts values in an ascending manner (based on internal method <code>__cmp__</code>)</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_string">'some'</span>,&nbsp;<span class="ace_string">'old'</span>,&nbsp;<span class="ace_string">'horses'</span>,&nbsp;<span class="ace_string">'can'</span>,&nbsp;<span class="ace_string">'always'</span>,&nbsp;<span class="ace_string">'have'</span>,&nbsp;<span class="ace_string">'tonnes'</span>,&nbsp;<span class="ace_string">'of'</span>,&nbsp;<span class="ace_string">'apples'</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>.<span class="ace_identifier">sort</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">X</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>['always', 'apples', 'can', 'have', 'horses', 'of', 'old', 'some', 'tonnes']</p>
</blockquote>
<p>This is as expected, in this case the predicate is that the value of a letter is less than the equivalent in the subsequenct values. Using a <code>lambda</code> function, we can override this (technically, we could use any function reference, this simply makes more sense as we're only using it here)</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_string">'some'</span>,&nbsp;<span class="ace_string">'old'</span>,&nbsp;<span class="ace_string">'horses'</span>,&nbsp;<span class="ace_string">'can'</span>,&nbsp;<span class="ace_string">'always'</span>,&nbsp;<span class="ace_string">'have'</span>,&nbsp;<span class="ace_string">'tonnes'</span>,&nbsp;<span class="ace_string">'of'</span>,&nbsp;<span class="ace_string">'apples'</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>.<span class="ace_identifier">sort</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">x</span>,&nbsp;<span class="ace_identifier">y</span>:&nbsp;<span class="ace_support ace_function">cmp</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">len</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>,&nbsp;<span class="ace_support ace_function">len</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">y</span><span class="ace_paren ace_rparen">)))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">X</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>['of', 'old', 'can', 'some', 'have', 'horses', 'always', 'tonnes', 'apples']</p>
</blockquote>
</div><div class="cell markdown-cell"><h2 id="functional-ish-programming">Functional(ish) Programming</h2>
<h3 id="map">map</h3>
<p>I want to apply function <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-54" style="width: 1.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.563em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.666em, 1000em, 2.863em, -0.616em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mo" id="MathJax-Span-57" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-58" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-59" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.187em; vertical-align: -0.311em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">f(x)</script> to all elements <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-7-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-60" style="width: 2.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.396em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.691em, 1000em, 2.683em, -0.496em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-61"><span class="mi" id="MathJax-Span-62" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-63" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">∈</span><span class="mi" id="MathJax-Span-64" style="font-family: STIXGeneral-Italic; padding-left: 0.313em;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.941em; vertical-align: -0.095em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7">x \in X</script>, where <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-8-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-65" style="width: 0.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.677em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.691em, 1000em, 2.656em, -0.498em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-66"><span class="mi" id="MathJax-Span-67" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.909em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">X</script> is some iterable container (list etc.)</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">result</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">mapped_function_pointer</span><span class="ace_keyword ace_operator">&gt;</span>,&nbsp;<span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">iterable</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h4 id="example-upper-case-all-elements-of-a-list">Example: Upper-case all elements of a list</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">'this&nbsp;is&nbsp;a&nbsp;test&nbsp;sentence'</span>.<span class="ace_identifier">split</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">str</span>.<span class="ace_identifier">upper</span>,&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>['THIS', 'IS', 'A', 'TEST', 'SENTENCE']</p>
</blockquote>
<h4 id="example-get-lengths-of-all-elements-of-a-list">Example: Get lengths of all elements of a list</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">len</span>,&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>[4, 2, 1, 4, 8]</p>
</blockquote>
<h4 id="example-get-a-list-of-hashes-for-strings">Example: Get a list of hashes for strings</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">from</span>&nbsp;<span class="ace_identifier">hashlib</span>&nbsp;<span class="ace_keyword">import</span>&nbsp;<span class="ace_identifier">sha1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">x</span>:&nbsp;<span class="ace_identifier">sha1</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>.<span class="ace_identifier">hexdigest</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>,&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>['c2543fff3bfa6f144c2f06a7de6cd10c0b650cae',<br> 'b47f363e2b430c0647f14deea3eced9b0ef300ce',<br> '86f7e437faa5a7fce15d1ddcb9eaeaea377667b8',<br> 'a94a8fe5ccb19ba61c4c0873d391e987982fbbd3',<br> 'a17dbb9a6b3ff869a7ff28d57f61e212c90d7db7']</p>
</blockquote>
<h3 id="reduce">reduce</h3>
<p>I have a series of values I want to reduce to one value</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">result</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">reduce</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">reduce_function_pointer</span><span class="ace_keyword ace_operator">&gt;</span>,&nbsp;<span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">iterable</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h4 id="example-summation">Example: Summation</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">from</span>&nbsp;<span class="ace_identifier">random</span>&nbsp;<span class="ace_keyword">import</span>&nbsp;<span class="ace_identifier">randint</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Generate&nbsp;100&nbsp;random&nbsp;numbers&nbsp;between&nbsp;0&nbsp;--&nbsp;100</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">randint</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">0</span>,&nbsp;<span class="ace_constant ace_numeric">100</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">100</span><span class="ace_paren ace_rparen">)]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">reduce</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">x</span>,&nbsp;<span class="ace_identifier">y</span>:&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">y</span>,&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>4579</p>
</blockquote>
<h4 id="example-total-lengths-of-strings">Example: Total lengths of strings</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">'this&nbsp;is&nbsp;a&nbsp;test&nbsp;sentence'</span>.<span class="ace_identifier">split</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">reduce</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">x</span>,&nbsp;<span class="ace_identifier">y</span>:&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">y</span>,&nbsp;<span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">len</span>,&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">)))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>19</p>
</blockquote>
<h3 id="filter">filter</h3>
<p>I want to filter my sequence <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-8-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-65" style="width: 0.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.677em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.691em, 1000em, 2.656em, -0.498em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-66"><span class="mi" id="MathJax-Span-67" style="font-family: STIXGeneral-Italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.044em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 0.909em; vertical-align: -0.063em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">X</script> to retain values for which only <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true" style=""><nobr><span class="math" id="MathJax-Span-54" style="width: 1.891em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.563em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.666em, 1000em, 2.863em, -0.616em); top: -2.5em; left: 0em;"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.146em;"></span></span><span class="mo" id="MathJax-Span-57" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-58" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-59" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.5em;"></span></span></span><span style="border-left-width: 0em; border-left-style: solid; display: inline-block; overflow: hidden; width: 0px; height: 1.187em; vertical-align: -0.311em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">f(x)</script> is <code>True</code>:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">result</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">filter</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">filter_function_pointer</span><span class="ace_keyword ace_operator">&gt;</span>,&nbsp;<span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">iterable</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h4 id="example-primes">Example: Primes</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">is_prime</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;...&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Imagine&nbsp;this&nbsp;is&nbsp;a&nbsp;really&nbsp;well-optimized&nbsp;algorithm</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">100</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">filter</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">is_prime</span>,&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<h3 id="zip">zip</h3>
<p>I have a number of sequences, which I wish to zip together.</p>
<p><strong>BONUS POINT</strong>: VARIADIC FTW!</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_paren ace_lparen">[</span><span class="ace_identifier">result</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">zip</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">iterable_1</span><span class="ace_keyword ace_operator">&gt;</span>,&nbsp;<span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">iterable_2</span><span class="ace_keyword ace_operator">&gt;</span>,&nbsp;...,&nbsp;<span class="ace_keyword ace_operator">&lt;</span><span class="ace_identifier">iterable_N</span><span class="ace_keyword ace_operator">&gt;</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h4 id="example-tri-grams">Example: tri-grams</h4>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">Q</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">"this&nbsp;is&nbsp;a&nbsp;sentence&nbsp;it's&nbsp;not&nbsp;supposed&nbsp;to&nbsp;be&nbsp;exciting"</span>.<span class="ace_identifier">split</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">zip</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">Q</span>,&nbsp;<span class="ace_identifier">Q</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1</span>:<span class="ace_paren ace_rparen">]</span>,&nbsp;<span class="ace_identifier">Q</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">2</span>:<span class="ace_paren ace_rparen">]))</span>
</div></div></div>
</code></pre>
<blockquote>
<p>[('this', 'is', 'a'),<br> ('is', 'a', 'sentence'),<br> ('a', 'sentence', "it's"),<br> ('sentence', "it's", 'not'),<br> ("it's", 'not', 'supposed'),<br> ('not', 'supposed', 'to'),<br> ('supposed', 'to', 'be'),<br> ('to', 'be', 'exciting')]</p>
</blockquote>
</div><div class="cell markdown-cell"><h1 id="pythonics">Pythonics</h1>
<h2 id="comprehensions">Comprehensions</h2>
<h3 id="list">List</h3>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">parse_results</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">results_unparsed</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">results_parsed</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">item</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">results_unparsed</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">results_parsed</span>.<span class="ace_identifier">append</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">parse_item</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">item</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_identifier">results_parsed</span>
</div></div></div>
</code></pre>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">parse_results</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">results_unparsed</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">parse_item</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">results_unparsed</span><span class="ace_paren ace_rparen">]</span>
</div></div></div>
</code></pre>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">parse_results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">z</span>:&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">parse_item</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">z</span><span class="ace_paren ace_rparen">]</span>
</div></div></div>
</code></pre>
<p>Or, make a generator, simply swap <code>[]</code> for <code>()</code> -- magic!</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">parse_results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_keyword">lambda</span>&nbsp;<span class="ace_identifier">z</span>:&nbsp;<span class="ace_paren ace_lparen">(</span><span class="ace_identifier">parse_item</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">z</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">parse_results</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">X</span><span class="ace_paren ace_rparen">))</span>
</div></div></div>
</code></pre>
<p><code>&lt;generator object &lt;genexpr&gt; at 0x102be7780&gt;</code></p>
<p>You could always push this down to compiled C code with <code>map</code>:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">parse_item</span>,&nbsp;<span class="ace_identifier">results_unparsed</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<h3 id="dictionary">Dictionary</h3>
<p>We know about <code>list</code> and <code>set</code> comprehensions, we can also make <code>dict</code>s the same way:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">X</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_string">'some'</span>,&nbsp;<span class="ace_string">'old'</span>,&nbsp;<span class="ace_string">'horses'</span>,&nbsp;<span class="ace_string">'can'</span>,&nbsp;<span class="ace_string">'always'</span>,&nbsp;<span class="ace_string">'have'</span>,&nbsp;<span class="ace_string">'tonnes'</span>,&nbsp;<span class="ace_string">'of'</span>,&nbsp;<span class="ace_string">'apples'</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">D</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">{</span><span class="ace_identifier">x</span>:&nbsp;<span class="ace_support ace_function">len</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">x</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">X</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">D</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
<blockquote>
<p>{'always': 6,<br> 'apples': 6,<br> 'can': 3,<br> 'have': 4,<br> 'horses': 6,<br> 'of': 2,<br> 'old': 3,<br> 'some': 4,<br> 'tonnes': 6}</p>
</blockquote>
<h2 id="context-managers">Context Managers</h2>
<p>The <code>with</code> keyword is your friend. Consider opening a file to read its contents:</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">file_ptr</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">open</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'path/to/file'</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span>&nbsp;<span class="ace_keyword">not</span>&nbsp;<span class="ace_identifier">file_ptr</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">raise</span>&nbsp;<span class="ace_identifier">IOError</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'Oops'</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Do&nbsp;stuff&nbsp;with&nbsp;file_ptr&nbsp;here</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">file_ptr</span>.<span class="ace_identifier">close</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;You&nbsp;have&nbsp;to&nbsp;remember&nbsp;to&nbsp;close&nbsp;resources</span>
</div></div></div>
</code></pre>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">with</span>&nbsp;<span class="ace_support ace_function">open</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'path/to/file'</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">as</span>&nbsp;<span class="ace_identifier">file_ptr</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Do&nbsp;stuff&nbsp;with&nbsp;file_ptr&nbsp;here</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Automagically&nbsp;closes&nbsp;resources&nbsp;when&nbsp;you&nbsp;leave&nbsp;indentation</span>
</div></div></div>
</code></pre>
<h3 id="concrete-example-load-data-from-a-file">Concrete Example: Load data from a file</h3>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">with</span>&nbsp;<span class="ace_support ace_function">open</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'path/to/file'</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">as</span>&nbsp;<span class="ace_identifier">file_ptr</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">data</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_function">map</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">str</span>.<span class="ace_identifier">strip</span>,&nbsp;<span class="ace_identifier">file_ptr</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;data&nbsp;is&nbsp;now&nbsp;ready&nbsp;to&nbsp;go</span>
</div></div></div>
</code></pre>
<h3 id="implementing-custom-context-manager">Implementing Custom Context Manager</h3>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_identifier">MySuperClass</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__enter__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Do&nbsp;your&nbsp;setup,&nbsp;open&nbsp;resources&nbsp;etc.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">__exit__</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">self</span>,&nbsp;<span class="ace_support ace_function">type</span>,&nbsp;<span class="ace_identifier">value</span>,&nbsp;<span class="ace_identifier">traceback</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Teardown,&nbsp;close&nbsp;resources&nbsp;etc.</span>
</div></div></div>
</code></pre>
<h2 id="more-complex-example-of-concepts">More Complex Example of Concepts</h2>
<p>This example is a data-generator written by me, using a streaming model.</p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">from</span>&nbsp;<span class="ace_identifier">random</span>&nbsp;<span class="ace_keyword">import</span>&nbsp;<span class="ace_identifier">choice</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">SIZE_KEY</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">10</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">SIZE_VALUE</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">3000</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">SIZE_TARGET</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">1024</span>&nbsp;<span class="ace_keyword ace_operator">**</span>&nbsp;<span class="ace_constant ace_numeric">3</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;1GB</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">STR_ALPHABET</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">"abcdefghijklmnopqrstuvwxyz"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">STR_NUMERICS</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">''</span>.<span class="ace_identifier">join</span><span class="ace_paren ace_lparen">([</span><span class="ace_support ace_function">str</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">i</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">10</span><span class="ace_paren ace_rparen">)])</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALPHABET</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">a</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">a</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">STR_ALPHABET</span>.<span class="ace_identifier">upper</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ALPHA_NUMERIC</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_identifier">a</span>&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">a</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">STR_ALPHABET</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">STR_ALPHABET</span>.<span class="ace_identifier">upper</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">STR_NUMERICS</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">generate_keys</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">prefix</span><span class="ace_keyword ace_operator">=</span><span class="ace_string">""</span>,&nbsp;<span class="ace_identifier">current_depth</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">0</span>,&nbsp;<span class="ace_identifier">max_depth</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">SIZE_KEY</span>,&nbsp;<span class="ace_identifier">series</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">ALPHABET</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">current_depth</span>&nbsp;<span class="ace_keyword ace_operator">==</span>&nbsp;<span class="ace_identifier">max_depth</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Finish&nbsp;the&nbsp;recursion</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">yield</span>&nbsp;<span class="ace_identifier">prefix</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Send&nbsp;this&nbsp;up&nbsp;the&nbsp;pipeline!</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">else</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">a</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">series</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Have&nbsp;to&nbsp;do&nbsp;this,&nbsp;else&nbsp;you're&nbsp;not&nbsp;yielding&nbsp;values</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">key</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">generate_keys</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">prefix</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">a</span>,&nbsp;<span class="ace_identifier">current_depth</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_constant ace_numeric">1</span>,&nbsp;<span class="ace_identifier">max_depth</span>,&nbsp;<span class="ace_identifier">series</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">yield</span>&nbsp;<span class="ace_identifier">key</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">generate_value</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">size_value</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">SIZE_VALUE</span>,&nbsp;<span class="ace_identifier">series</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">ALPHA_NUMERIC</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">output</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">func_app</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">output</span>.<span class="ace_identifier">append</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Speed-up</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">i</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">xrange</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">size_value</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">func_app</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">choice</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">series</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_string">''</span>.<span class="ace_identifier">join</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">output</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">generate_data</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">size_max</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">SIZE_TARGET</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_identifier">size_key</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">SIZE_KEY</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_identifier">size_value</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">SIZE_VALUE</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">size_line</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">(</span><span class="ace_identifier">size_key</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_constant ace_numeric">1</span>&nbsp;<span class="ace_keyword ace_operator">+</span>&nbsp;<span class="ace_identifier">size_value</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">size_total</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">0</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">func_line</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string">"{}:{}"</span>.<span class="ace_support ace_function">format</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">key</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">generate_keys</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">max_depth</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">size_key</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Iterate&nbsp;over&nbsp;generator</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">line</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">func_line</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">key</span>,&nbsp;<span class="ace_identifier">generate_value</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">size_value</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">size_total</span>&nbsp;<span class="ace_keyword ace_operator">+=</span>&nbsp;<span class="ace_identifier">size_line</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">size_total</span>&nbsp;<span class="ace_keyword ace_operator">&gt;=</span>&nbsp;<span class="ace_identifier">size_max</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">return</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">else</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">yield</span>&nbsp;<span class="ace_identifier">line</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;To&nbsp;in&nbsp;turn&nbsp;become&nbsp;another&nbsp;generator</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">save_output</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">output_file</span>,&nbsp;<span class="ace_identifier">func_generate</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">generate_data</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">with</span>&nbsp;<span class="ace_support ace_function">open</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">output_file</span>,&nbsp;<span class="ace_string">'w'</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_keyword">as</span>&nbsp;<span class="ace_identifier">fp</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">data</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">generate_data</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:&nbsp;&nbsp;<span class="ace_comment">#&nbsp;For&nbsp;line&nbsp;in&nbsp;the&nbsp;generator,&nbsp;write&nbsp;it&nbsp;out</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_identifier">fp</span>.<span class="ace_identifier">writeline</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">data</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;No&nbsp;unnecessary&nbsp;memory&nbsp;usage.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">__name__</span>&nbsp;<span class="ace_keyword ace_operator">==</span>&nbsp;<span class="ace_string">'__main__'</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">line</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">generate_data</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">size_value</span><span class="ace_keyword ace_operator">=</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">print</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">line</span><span class="ace_paren ace_rparen">)</span>
</div></div></div>
</code></pre>
</div><div class="cell markdown-cell"><h1 id="single-threading-is-1990s">Single-threading is 1990s</h1>
<p>Your computer has multiple cores, even your mobile phone does -- use them. Parallelise your workload for the greater win. Python makes this (relatively) simple.</p>
</div><div class="cell text-cell"><img src="resources/88106FF28A9883CF9A403D5EF4D00127.gif" alt="giphy.gif"></div><div class="cell markdown-cell"><pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">import</span>&nbsp;<span class="ace_identifier">multiprocessing</span>&nbsp;<span class="ace_keyword">as</span>&nbsp;<span class="ace_identifier">mp</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Standard&nbsp;library</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;The&nbsp;function&nbsp;we're&nbsp;going&nbsp;to&nbsp;parallelise</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">worker</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tasks</span>,&nbsp;<span class="ace_identifier">results</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">exp_tuple</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">iter</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tasks</span>.<span class="ace_identifier">get</span>,&nbsp;<span class="ace_constant ace_language">None</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;...&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Do&nbsp;some&nbsp;work</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">put</span><span class="ace_paren ace_lparen">(</span>...<span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">run_mp_example</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">input_data</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">tasks</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">mp</span>.<span class="ace_identifier">Queue</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">mp</span>.<span class="ace_identifier">JoinableQueue</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">args</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">(</span><span class="ace_identifier">tasks</span>,&nbsp;<span class="ace_identifier">results</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">num_processors</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">mp</span>.<span class="ace_identifier">cpu_count</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;How&nbsp;many&nbsp;CPUs&nbsp;we&nbsp;have&nbsp;available</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">jobs</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;For&nbsp;collating&nbsp;the&nbsp;params&nbsp;etc.&nbsp;of&nbsp;the&nbsp;jobs</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">values</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_comment">#&nbsp;For&nbsp;collating&nbsp;output&nbsp;values</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">f_append</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">values</span>.<span class="ace_identifier">append</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Setup&nbsp;your&nbsp;experiments&nbsp;with&nbsp;args&nbsp;into&nbsp;jobs</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;...
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">job</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_identifier">jobs</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">tasks</span>.<span class="ace_identifier">put</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">job</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">_</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">num_processors</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">mp</span>.<span class="ace_identifier">Process</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">target</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">worker</span>,&nbsp;<span class="ace_identifier">args</span><span class="ace_keyword ace_operator">=</span><span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>.<span class="ace_identifier">start</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Starts&nbsp;processes</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">_</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_function">len</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">jobs</span><span class="ace_paren ace_rparen">))</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">f_append</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">results</span>.<span class="ace_identifier">get</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">))</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">task_done</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">for</span>&nbsp;<span class="ace_identifier">_</span>&nbsp;<span class="ace_keyword">in</span>&nbsp;<span class="ace_support ace_function">range</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">num_processors</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">tasks</span>.<span class="ace_identifier">put</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_language">None</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">join</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Synchronise&nbsp;the&nbsp;threads</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">tasks</span>.<span class="ace_identifier">close</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Close&nbsp;the&nbsp;tasks&nbsp;pool</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">close</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>&nbsp;<span class="ace_comment">#&nbsp;Close&nbsp;the&nbsp;results&nbsp;pool</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">return</span>&nbsp;<span class="ace_identifier">values</span>&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Parallel&nbsp;part&nbsp;finished,&nbsp;return&nbsp;results</span>
</div></div></div>
</code></pre>
<p>This is a really barebones example which can be extended as necessary.</p>
<h2 id="example-training-multiple-models">Example: Training Multiple Models</h2>
<p>If we want to train multiple (different) models on the same data, we could set this up to run in parallel and train together. </p>
<h2 id="example-independent-workloads">Example: Independent Workloads</h2>
<p>If we were to have some data which are independent and need to perform analysis on them, i.e. content extraction from a web-scrape, this is a good candidate for parallelisation.</p>
</div><div class="cell markdown-cell"><h1 id="profiling">Profiling</h1>
<p>Find where your code is slow or hungry. You can learn more about profiling in Python in <a href="http://lanyrd.com/2013/pycon/scdywg/">this PyCon 2013 talk</a>.</p>
<h2 id="runtime">Runtime</h2>
<p>The standard module <code>cProfile</code> is your friend. You can incorporate this directly into your code, but a simpler way to invoke it is to do so from the command line. Suppose you have your application entry point <code>main.py</code>, you can then simply run:</p>
<p><code>python -m cProfile main.py</code></p>
<p>Let your program run (this will take longer than usual), and you are then given a breakdown of where the CPU cycles are going:</p>
<pre><code><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;4285004038&nbsp;function&nbsp;calls&nbsp;(4281067090&nbsp;primitive&nbsp;calls)&nbsp;in&nbsp;1160.923&nbsp;seconds
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;Ordered&nbsp;by:&nbsp;standard&nbsp;name
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;ncalls&nbsp;&nbsp;tottime&nbsp;&nbsp;percall&nbsp;&nbsp;cumtime&nbsp;&nbsp;percall&nbsp;filename:lineno(function)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;__future__.py:48(&lt;module&gt;)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;__future__.py:74(_Feature)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;__future__.py:75(__init__)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>4293556/356608&nbsp;&nbsp;&nbsp;&nbsp;1.327&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;1.327&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;datagen.py:15(generate_keys)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;356607&nbsp;&nbsp;338.542&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;1157.346&nbsp;&nbsp;&nbsp;&nbsp;0.003&nbsp;datagen.py:24(generate_value)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.198&nbsp;&nbsp;&nbsp;&nbsp;0.198&nbsp;1160.923&nbsp;1160.923&nbsp;datagen.py:3(&lt;module&gt;)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;356607&nbsp;&nbsp;&nbsp;&nbsp;1.645&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;1160.721&nbsp;&nbsp;&nbsp;&nbsp;0.003&nbsp;datagen.py:34(generate_data)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;hashlib.py:100(__get_openssl_constructor)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.002&nbsp;&nbsp;&nbsp;&nbsp;0.002&nbsp;&nbsp;&nbsp;&nbsp;0.002&nbsp;&nbsp;&nbsp;&nbsp;0.002&nbsp;hashlib.py:56(&lt;module&gt;)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;random.py:100(seed)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>1069821000&nbsp;&nbsp;582.331&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;732.157&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;random.py:273(choice)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;&nbsp;&nbsp;&nbsp;0.004&nbsp;&nbsp;&nbsp;&nbsp;0.004&nbsp;random.py:40(&lt;module&gt;)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;random.py:655(WichmannHill)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;random.py:72(Random)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;random.py:805(SystemRandom)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;&nbsp;&nbsp;&nbsp;0.001&nbsp;random.py:91(__init__)
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{_hashlib.openssl_md5}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{_hashlib.openssl_sha1}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{_hashlib.openssl_sha224}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{_hashlib.openssl_sha256}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{_hashlib.openssl_sha384}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{_hashlib.openssl_sha512}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{binascii.hexlify}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{function&nbsp;seed&nbsp;at&nbsp;0x10d55ba28}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{getattr}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;6&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{globals}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>1069821000&nbsp;&nbsp;&nbsp;72.928&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;72.928&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{len}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{math.exp}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{math.log}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{math.sqrt}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>1069821000&nbsp;&nbsp;&nbsp;75.507&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;75.507&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'append'&nbsp;of&nbsp;'list'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'disable'&nbsp;of&nbsp;'_lsprof.Profiler'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;356607&nbsp;&nbsp;&nbsp;&nbsp;0.403&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.403&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'format'&nbsp;of&nbsp;'str'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;356608&nbsp;&nbsp;&nbsp;11.140&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;11.140&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'join'&nbsp;of&nbsp;'str'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>1069821000&nbsp;&nbsp;&nbsp;76.898&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;76.898&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'random'&nbsp;of&nbsp;'_random.Random'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'union'&nbsp;of&nbsp;'set'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;2&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{method&nbsp;'upper'&nbsp;of&nbsp;'str'&nbsp;objects}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{posix.urandom}
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;&nbsp;&nbsp;&nbsp;0.000&nbsp;{range}
</div></div></div>
</code></pre><p>Problem areas:</p>
<ol>
<li><code>356607  338.542    0.001 1157.346    0.003 datagen.py:24(generate_value)</code></li><li><code>1069821000  582.331    0.000  732.157    0.000 random.py:273(choice)</code></li></ol>
<h2 id="memory">Memory</h2>
<p>To check the memory consumption of your script, a third-party library called <code>memory_profiler</code> is recommended. Install this with:</p>
<p><code>pip install --user memory_profiler</code></p>
<p>You then have access to the <a href="https://realpython.com/blog/python/primer-on-python-decorators/">function decorator</a> <code>@profile</code>, which is used: </p>
<pre><code class="lang-python"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>@<span class="ace_identifier">profile</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">my_func_to_profile</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>:
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">pass</span>
</div></div></div>
</code></pre>
<p>I run this in the same way as <code>cProfile</code> is used:</p>
<p><code>python -m memory_profiler main.py</code></p>
<p>TODO: here</p>
<p>If you want to know more about profiling Python programs, <a href="https://www.huyng.com/posts/python-performance-analysis">this webpage</a> has an excellent write up, including some more advanced tools.</p>
</div><div class="cell markdown-cell"><h1 id="platforms">Platforms</h1>
<p>CPython is the typical interpreter you'll use, consider the others, like PyPy (JIT magic) -- if your application can run on that (i.e. all its dependencies are compatible), you can expect faster execution times.</p>
<h2 id="using-python-in-matlab">Using Python in MATLAB</h2>
<p><em>BONUS</em>: Use Python functions, data structures etc. all from within MATLAB! Using <code>py.</code> gives access to a Python interpreter as a namespace in MATLAB</p>
<pre><code class="lang-matlab"><div class="ace-chrome"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">py</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">list</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">Python</span>&nbsp;<span class="ace_support ace_function">list</span>&nbsp;<span class="ace_identifier">with</span>&nbsp;<span class="ace_identifier">no</span>&nbsp;<span class="ace_identifier">properties</span><span class="ace_punctuation ace_operator">.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">append</span><span class="ace_paren ace_lparen">(</span><span class="ace_constant ace_numeric">1</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">x</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">Python</span>&nbsp;<span class="ace_support ace_function">list</span>&nbsp;<span class="ace_identifier">with</span>&nbsp;<span class="ace_identifier">no</span>&nbsp;<span class="ace_identifier">properties</span><span class="ace_punctuation ace_operator">.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1.0</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">x</span><span class="ace_punctuation ace_operator">.</span><span class="ace_identifier">append</span><span class="ace_paren ace_lparen">(</span><span class="ace_string">'test'</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">x</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">x</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">Python</span>&nbsp;<span class="ace_support ace_function">list</span>&nbsp;<span class="ace_identifier">with</span>&nbsp;<span class="ace_identifier">no</span>&nbsp;<span class="ace_identifier">properties</span><span class="ace_punctuation ace_operator">.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_numeric">1.0</span><span class="ace_punctuation ace_operator">,</span>&nbsp;<span class="ace_string">'test'</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">y</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">py</span><span class="ace_punctuation ace_operator">.</span><span class="ace_support ace_function">dict</span><span class="ace_paren ace_lparen">(</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">y</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">Python</span>&nbsp;<span class="ace_support ace_function">dict</span>&nbsp;<span class="ace_identifier">with</span>&nbsp;<span class="ace_identifier">no</span>&nbsp;<span class="ace_identifier">properties</span><span class="ace_punctuation ace_operator">.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_lparen">{</span><span class="ace_paren ace_rparen">}</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">&gt;&gt;</span>&nbsp;<span class="ace_identifier">y</span><span class="ace_paren ace_lparen">{</span><span class="ace_string">'my_key'</span><span class="ace_paren ace_rparen">}</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">y</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">Python</span>&nbsp;<span class="ace_support ace_function">dict</span>&nbsp;<span class="ace_identifier">with</span>&nbsp;<span class="ace_identifier">no</span>&nbsp;<span class="ace_identifier">properties</span><span class="ace_punctuation ace_operator">.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_lparen">{</span><span class="ace_string">'my_key'</span><span class="ace_punctuation ace_operator">:</span>&nbsp;<span class="ace_constant ace_numeric">1.0</span><span class="ace_paren ace_rparen">}</span>
</div></div></div>
</code></pre>
<p><a href="https://uk.mathworks.com/help/matlab/call-python-libraries.html">Full guide for all Python in MATLAB here (official)</a></p>
</div><div class="cell text-cell"></div></div>
  <script>document.body.onkeyup = function(e) {
}</script>
</body>
</html>
